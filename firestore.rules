rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // 会話データへのアクセス許可
    match /conversations/{conversationId} {
      allow read, write: if true; // 開発中は全許可（本番では認証必須）

      // メッセージサブコレクション
      match /messages/{messageId} {
        allow read, write: if true;
      }

      // ラインサブコレクション
      match /lines/{lineId} {
        allow read, write: if true;
      }

      // ブランチポイントサブコレクション
      match /branchPoints/{branchPointId} {
        allow read, write: if true;
      }

      // タグサブコレクション
      match /tags/{tagId} {
        allow read, write: if true;
      }

      // タググループサブコレクション
      match /tagGroups/{tagGroupId} {
        allow read, write: if true;
      }
    }
  }
}