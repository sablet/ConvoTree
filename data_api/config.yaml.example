# データAPI設定ファイル（サンプル）
# 実際に使用する際は、config.yaml としてコピーして値を設定してください
# cp config.yaml.example config.yaml

# 入力データパス
input:
  # メッセージCSVファイルのパス（単一ファイルまたは複数ファイルのリスト）
  # 単一ファイルの場合:
  # csv_path: "/Users/your-username/git_dir/chat-line/output/db-exports/YYYY-MM-DDTHH-MM-SS/messages_with_hierarchy.csv"
  # 複数ファイルの場合（結合して処理）:
  csv_path:
    - "/Users/your-username/git_dir/chat-line/output/db-exports/2025-11-01/messages_with_hierarchy.csv"
    - "/Users/your-username/git_dir/chat-line/output/db-exports/2025-11-02/messages_with_hierarchy.csv"
    # Claude履歴を含める場合:
    # - "output/claude-history/parsed_messages.csv"
    # ChatGPT履歴を含める場合:
    # - "output/chatgpt-history/parsed_messages.csv"
    # Gemini履歴を含める場合:
    # - "output/gemini-history/parsed_messages.csv"

# 履歴パーサー設定
parsers:
  # ChatGPT履歴パーサー
  chatgpt:
    # ChatGPTからエクスポートしたconversations.jsonのパス
    # エクスポート方法: ChatGPT設定 → Data controls → Export data
    input_path: "/Users/your-username/Downloads/conversations.json"
    output_dir: "output/chatgpt-history"

  # Claude履歴パーサー
  claude:
    # Claude Codeの履歴ファイル（通常は~/.claude/history.jsonl）
    input_path: "~/.claude/history.jsonl"
    output_dir: "output/claude-history"

  # Gemini履歴パーサー
  gemini:
    # Google TakeoutからエクスポートしたマイアクティビティHTMLのパス
    # エクスポート方法: https://takeout.google.com/ → マイアクティビティ → Gemini アプリを選択
    input_path: "/Users/your-username/Downloads/Takeout/マイ アクティビティ/Gemini アプリ/マイアクティビティ.html"
    output_dir: "output/gemini-history"

# 出力ディレクトリパス
output:
  # ベースディレクトリ
  base_dir: "output"
  # クラスタリング結果
  clustering_dir: "output/message_clustering"
  # 意図抽出結果
  intent_extraction_dir: "output/intent_extraction"
  # ゴールネットワーク
  goal_network_dir: "output/goal_network"
  # RAGインデックス
  rag_index_dir: "output/rag_index"

# クラスタリングパラメータ (k-means-constrained)
clustering:
  # 埋め込みベクトルの重み
  embedding_weight: 0.7
  # 時間の重み
  time_weight: 0.15
  # 階層の重み
  hierarchy_weight: 0.15
  # 時間カーネル帯域幅（時間）
  time_bandwidth_hours: 168.0
  # 最小クラスタサイズ
  size_min: 10
  # 最大クラスタサイズ
  size_max: 50
  # クラスタ数（Noneの場合は自動決定）
  n_clusters: null
  # k-means: 初期化回数
  n_init: 10
  # k-means: 最大反復回数
  max_iter: 300
  # 後方互換パラメータ（使用されない）
  min_cluster_size: 10
  min_samples: 5
  linkage: "average"

# 意図抽出パラメータ
intent_extraction:
  # 並列処理の最大ワーカー数
  max_workers: 5

# ゴールネットワーク構築パラメータ
goal_network:
  # 入力ファイル（ultra_intents_enriched.json）
  input_path: "output/intent_extraction/cross_cluster/ultra_intents_enriched.json"

# RAGパラメータ
rag:
  # 統合ドキュメント出力先
  unified_intents_path: "output/rag_index/unified_intents.jsonl"
  # Chroma DBパス
  chroma_db_path: "output/rag_index/chroma_db"
  # 検索時の取得件数
  top_k: 15
  # グラフ抽出戦略
  subgraph_strategy: "balanced"
