# インテントリスト
{intents_text}

# タスク
上記のインテント間で「目的→手段」の階層関係を判定し、**1本（または数本）の大きな木構造**にまとめてMarkdownリスト形式で出力してください。

# Intent（意図）の定義
各Intentは **志向対象（何を）** + **志向方向性（どうしたい）** の形式で記述してください。

| 内容 | 判定 | 理由 |
|------|------|------|
| 作業効率を上げたい | ○ | 対象＝作業効率、方向性＝上げたい |
| ユーザーが迷わず使えるUIを実現したい | ○ | 対象＝UI、方向性＝実現したい |
| バグを減らす | ○ | 対象＝バグ、方向性＝減らす |
| チームのモチベーション向上に取り組む | ○ | 対象＝モチベーション、方向性＝向上/取り組む |
| より良くしたい | △ | 方向性はあるが対象が不明 |
| 新しいことに挑戦 | △ | 対象が曖昧、方向性は示されている |
| ミスを減らせたらいいな | △ | 対象＝ミス、方向性＝減らすだが願望的で弱い |
| デザインが気になる | ✕ | 感情表明、方向性なし |
| 時間が足りない | ✕ | 状況記述、目的・方向性なし |
| ユーザーの離脱を防ぎたい | ○ | 対象＝離脱、方向性＝防ぎたい |


# 重要な制約
1. **既存Intent間の階層関係を優先**: まず元のリストにある既存Intent間で「目的→手段」の階層関係を探してください
   - 既存Intentに上位目的が含まれている場合、必ずそれを使用してください（新規作成不要）
   - 既存Intentだけでは階層構造が不完全な場合のみ、抽象化された上位目的を補完してください
   - 補完する上位Intentも、**必ず志向対象と方向性を含めてください**
   - 単なるカテゴリ名やラベルではなく、意図の形式で記述してください

2. **理想は1本の木**: 全体を1本の大きな木構造にまとめてください

3. **複数の木は最小限に**: まったく異なるテーマの場合のみ、複数の木に分けてください（2-3本程度）

4. **既存IDの保持**: 元のリストにあるIntentには必ず `id=intent_XXXXX` を含めてください

5. **新規ノードのID**: 上位の抽象目的を補完作成する場合のみ、`id=generated_XXX` の形式でIDを付けてください（連番: 001, 002, ...）

# プロパティ定義

**必須**:
- `id=intent_XXXXX` (元のリストにあるIntent) または `id=generated_XXX` (新規作成ノード)

**任意**:
- `status=todo|doing|done|idea` (クォート不要、新規ノードは `idea` 推奨)
- `context="..."` (背景情報、ダブルクォートで囲む)
- `objective_facts="..."` (客観的根拠、ダブルクォートで囲む)

**記述ルール**:
- Intentテキストはラベルとして記述し、プロパティで重複させない
- 文字列はダブルクォート、キーワードはクォート不要、スペース区切り
- 形式: `Intent text {property1="value1" property2=keyword id=xxx}`

## objective_facts（客観的根拠）の判定基準

| 内容 | 判定 | 理由 |
|------|------|------|
| 過去のメモアプリが整理できなかった経験がある | ○ | 経験・事実として扱える |
| ユーザー調査結果で60%が離脱している | ○ | データ・数値で示された事実 |
| OWASP guidelines, mermaid spec | ○ | 文書・仕様への参照 |
| 全体像が見えていない | ✕ | 認識・感情、客観的ではない |
| 活用しやすい | ✕ | 主観的評価 |
| 葛藤している | ✕ | 感情・思考、客観的ではない |

# 出力形式とFew-shot例

## 例-1: 既存Intentだけで階層が完結する場合（理想的なケース）

**入力（5件のIntent - 上位目的も含まれている）**:
```
1. データ処理システムを改善したい {id=intent_00001}
2. データの正規化を行いたい {id=intent_00002}
3. データのバリデーションを強化したい {id=intent_00003}
4. キャッシュ機構を導入したい {id=intent_00004}
5. 処理性能を最適化したい {id=intent_00005}
```

**出力（既存Intentのみで構成、generated不要）**:
- データ処理システムを改善したい {status=idea id=intent_00001}
  - データの正規化を行いたい {status=todo id=intent_00002}
  - データのバリデーションを強化したい {status=todo id=intent_00003}
  - 処理性能を最適化したい {status=idea id=intent_00005}
    - キャッシュ機構を導入したい {status=doing id=intent_00004}
→ 全て `id=intent_XXXXX` で構成（`generated_XXX` は不要）
→ 既存Intentに上位目的が含まれている場合、必ずそれを使用する

## 例0: 上位目的が欠けている場合（補完が必要なケース）

**入力（4件のIntent - 具体的な手段のみで上位目的が無い）**:
```
1. データの正規化を行いたい {id=intent_00001}
2. データのバリデーションを強化したい {id=intent_00002}
3. キャッシュ機構を導入したい {id=intent_00003}
4. 非同期処理を実装したい {id=intent_00004}
```

**出力（上位目的を補完して階層構造を構築）**:
- データ処理システムを改善したい {status=idea id=generated_001}
  - データ品質を向上させたい {status=idea id=generated_002}
    - データの正規化を行いたい {status=todo id=intent_00001}
    - データのバリデーションを強化したい {status=todo id=intent_00002}
  - 処理性能を最適化したい {status=idea id=generated_003}
    - キャッシュ機構を導入したい {status=doing id=intent_00003}
    - 非同期処理を実装したい {status=todo id=intent_00004}
→ 元のリストに上位目的が無いため、`id=generated_XXX` で補完
→ 「データ品質向上（generated_002）」「処理性能最適化（generated_003）」を中間目的として補完
→ さらに「データ処理システム改善（generated_001）」を最上位目的として補完

## 例1: 関連性が低い複数のテーマ（複数の木に分割 + 全プロパティ使用例）
- プロジェクト管理を効率化したい {status=idea id=generated_010 context="チーム拡大"}
  - タスクの優先度付けを自動化したい {status=todo id=intent_00010 objective_facts="backlog分析"}
  - 進捗の可視化を改善したい {status=doing id=intent_00011}

- セキュリティを強化したい {status=idea id=generated_020 context="コンプライアンス要件"}
  - 認証機能を追加したい {status=doing id=intent_00020 objective_facts="OWASP guidelines"}
  - アクセスログを記録したい {status=todo id=intent_00021}
→ プロジェクト管理とセキュリティは関連性が低いため、2本の独立した木に分割
→ `id=generated_XXX` で新規作成ノードを明示、`context` は背景情報、`objective_facts` は客観的根拠

# エッジケース処理

**インテント数が少ない場合**:
- 1件のみ: そのIntentをルートとして出力
- 0件: 空（何も出力しない）

**関連性が見つからない場合**:
- 複数の独立した木として出力（例1参照）
- 無理に1本にまとめない

**階層の深さ**:
- 推奨: 3-5階層
- 最大: 7階層まで（深すぎる場合は中間の抽象レベルを追加して調整）

# 最終指示
- **既存Intent間の階層関係を最優先で探すこと**（generated は補完が必要な場合のみ使用）
- 全てのノードに志向対象と方向性を含めること
- 元のIntentには `id=intent_XXXXX`、補完ノードには `id=generated_XXX` を付けること
- Markdownリスト形式のみを返す（説明文不要）
