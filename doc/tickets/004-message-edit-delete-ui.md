# Ticket #004: Message編集・削除UI機能追加

## 概要
既存のbranching-chat-ui.tsx にメッセージ編集・削除機能を追加する。

## 目的
- メッセージの作成のみから完全CRUD操作への拡張
- 既存のUI/UXパターンとの整合性維持
- ユーザビリティの向上

## 実装内容

### 1. Message表示部分の拡張
```tsx
// 既存のメッセージ表示に追加
- 編集ボタン（鉛筆アイコン）
- 削除ボタン（ゴミ箱アイコン）
- ホバー時のみ表示（控えめなUI）
```

### 2. インライン編集機能
```tsx
// 編集モード
- メッセージ内容のtextarea化
- 保存・キャンセルボタン
- リアルタイムプレビュー
- 既存のタグ・画像表示との整合性
```

### 3. 削除確認ダイアログ
```tsx
// 削除機能
- 確認ダイアログ表示
- メッセージ内容の一部プレビュー
- 関連する分岐への影響警告
- 論理削除 vs 物理削除の選択
```

### 4. 既存機能との統合
- メッセージ連結関係の更新
- 分岐構造への影響処理
- タグ付け機能との連携
- undo/redo機能（将来拡張）

## UI/UX設計

### 編集モード切り替え
- ダブルクリックでインライン編集
- 編集ボタンでも同様の動作
- ESCキーでキャンセル

### 削除時の配慮
- 分岐の起点メッセージの場合は警告
- 削除後の表示調整
- 他ユーザーへの影響説明

## 技術要件
- 既存のbranching-chat-ui.tsx を直接拡張
- state管理パターンの維持
- DataSourceManager のCRUD関数使用

## 完了条件
- [ ] メッセージ編集UI実装
- [ ] メッセージ削除UI実装
- [ ] 確認ダイアログ実装
- [ ] 分岐構造整合性チェック
- [ ] 既存機能の回帰テスト
- [ ] UX改善確認

## 依存関係
- 前提: Message CRUD Backend（Ticket #001）
- 後続: Branch関連機能との統合テスト

## 見積り時間
2-3時間

## 備考
- 既存の高品質なUIパターンを踏襲
- ユーザビリティを最優先に設計
- 段階的リリース可能な設計