# Chat Line ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

Firebase Firestore ã‚’ä½¿ç”¨ã—ãŸåˆ†å²å‹ãƒãƒ£ãƒƒãƒˆã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®è¨­å®šãƒ»é–‹ç™ºãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆé›†ã§ã™ã€‚

## ğŸ“š ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä¸€è¦§

### ğŸš€ ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚¬ã‚¤ãƒ‰
- **[firebase-setup-guide.md](firebase-setup-guide.md)** - Firebase Firestore ã®å®Œå…¨ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ‰‹é †
  - CLI ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‹ã‚‰æœ¬ç•ªãƒ‡ãƒ—ãƒ­ã‚¤ã¾ã§ã®å…¨æ‰‹é †
  - ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°æƒ…å ±å«ã‚€

### ğŸ§ª ãƒ†ã‚¹ãƒˆãƒ»é–‹ç™º
- **[firestore-test-component.md](firestore-test-component.md)** - Firestore æ¥ç¶šãƒ†ã‚¹ãƒˆã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
  - æ¥ç¶šç¢ºèªç”¨Reactã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ä»•æ§˜
  - ãƒ‡ãƒãƒƒã‚°æ–¹æ³•ã¨ã‚¨ãƒ©ãƒ¼å¯¾å¿œ

### ğŸ—ï¸ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ 
- **[project-structure.md](project-structure.md)** - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå…¨ä½“ã®æ§‹é€ ã¨ãƒ•ã‚¡ã‚¤ãƒ«èª¬æ˜
  - ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 
  - Firebaseè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«è©³ç´°
  - Firestoreãƒ‡ãƒ¼ã‚¿æ§‹é€ 

### ğŸ“Š ãƒ‡ãƒ¼ã‚¿æ§‹é€ 
- **[data-structure.md](data-structure.md)** - ç¾åœ¨ã®ãƒ‡ãƒ¼ã‚¿æ§‹é€ ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹
  - Message / Line / Tag ã®è©³ç´°ä»•æ§˜
  - ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹ãƒ‘ã‚¿ãƒ¼ãƒ³
  - ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°ã®ä½¿ã„æ–¹
- **[data-structure-migration.md](data-structure-migration.md)** - ãƒ‡ãƒ¼ã‚¿æ§‹é€ ç§»è¡Œã‚¬ã‚¤ãƒ‰
  - æ—§æ§‹é€ ã‹ã‚‰æ–°æ§‹é€ ã¸ã®ç§»è¡Œæ‰‹é †
  - ç§»è¡Œã‚¹ã‚¯ãƒªãƒ—ãƒˆã®ä½¿ã„æ–¹

### ğŸ”§ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£
- **[repository-pattern-guide.md](repository-pattern-guide.md)** - Repository ãƒ‘ã‚¿ãƒ¼ãƒ³ã®å®Ÿè£…ã‚¬ã‚¤ãƒ‰
  - ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹å±¤ã®è¨­è¨ˆ
  - IDataSource ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
- **[architecture-enforcement.md](architecture-enforcement.md)** - ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£å¼·åˆ¶ã‚¬ã‚¤ãƒ‰
  - ã‚³ãƒ¼ãƒ‰å“è³ªåŸºæº–
  - ESLint / SonarJS è¨­å®š

### ğŸ” æ©Ÿå¯†æƒ…å ±ï¼ˆãƒ­ãƒ¼ã‚«ãƒ«ã®ã¿ï¼‰
- **firebase-secrets-template.md** - å®Ÿéš›ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨­å®šå€¤
  - âš ï¸ ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã¯gitignoreã«è¿½åŠ æ¸ˆã¿
  - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå›ºæœ‰ã®è¨­å®šå€¤ã‚’ä¿å­˜
  - ãƒãƒ¼ãƒ å†…ã§å®‰å…¨ã«å…±æœ‰

## ğŸš€ ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ

### 1. æ–°è¦ç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
```bash
# ãƒªãƒã‚¸ãƒˆãƒªã‚¯ãƒ­ãƒ¼ãƒ³å¾Œ
git clone <repository>
cd chat-line

# Firebaseè¨­å®šï¼ˆè©³ç´°ã¯ firebase-setup-guide.md å‚ç…§ï¼‰
npm install firebase firebase-admin --legacy-peer-deps
firebase login
firebase init

# ç’°å¢ƒå¤‰æ•°è¨­å®šï¼ˆfirebase-secrets-template.md å‚ç…§ï¼‰
cp doc/firebase-secrets-template.md.example .env.local
# .env.local ã‚’ç·¨é›†

# ãƒ‡ãƒ¼ã‚¿ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
node scripts/import-to-firestore.js

# é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•
npx next dev
```

### 2. æ—¢å­˜ç’°å¢ƒã§ã®ä½œæ¥­
```bash
# ä¾å­˜é–¢ä¿‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm install

# é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•
npx next dev

# Firebase Console ã§ãƒ‡ãƒ¼ã‚¿ç¢ºèª
open "https://console.firebase.google.com/project/your-project-id/firestore"
```

## ğŸ”§ é–‹ç™ºã‚³ãƒãƒ³ãƒ‰

```bash
# é–‹ç™ºã‚µãƒ¼ãƒãƒ¼
npx next dev

# ãƒ“ãƒ«ãƒ‰ãƒ†ã‚¹ãƒˆ
npx next build

# Firebase ãƒ‡ãƒ—ãƒ­ã‚¤
firebase deploy

# Firestore ãƒ«ãƒ¼ãƒ«é©ç”¨
firebase deploy --only firestore:rules

# ãƒ‡ãƒ¼ã‚¿å†ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
node scripts/import-to-firestore.js
```

## ğŸ“‹ ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

### ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—å®Œäº†ç¢ºèª
- [ ] Firebase ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆæ¸ˆã¿
- [ ] Firestore ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ä½œæˆæ¸ˆã¿ï¼ˆãƒ†ã‚¹ãƒˆãƒ¢ãƒ¼ãƒ‰ï¼‰
- [ ] `.env.local` è¨­å®šæ¸ˆã¿
- [ ] `firebase-service-account.json` é…ç½®æ¸ˆã¿
- [ ] ãƒ‡ãƒ¼ã‚¿ã‚¤ãƒ³ãƒãƒ¼ãƒˆæˆåŠŸ
- [ ] http://localhost:3000 ã§Firestoreæ¥ç¶šãƒ†ã‚¹ãƒˆæˆåŠŸ

### ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ç¢ºèª
- [ ] `firebase-service-account.json` ãŒgitignoreã«è¿½åŠ æ¸ˆã¿
- [ ] `doc/firebase-secrets-template.md` ãŒgitignoreã«è¿½åŠ æ¸ˆã¿
- [ ] `.env.local` ãŒgitignoreã«è¿½åŠ æ¸ˆã¿
- [ ] æ©Ÿå¯†æƒ…å ±ãŒgitå±¥æ­´ã«å«ã¾ã‚Œã¦ã„ãªã„

## ğŸ” ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ã‚ˆãã‚ã‚‹å•é¡Œ
1. **Firebaseæ¥ç¶šã‚¨ãƒ©ãƒ¼** â†’ `.env.local` ã®è¨­å®šå€¤ç¢ºèª
2. **Permission denied** â†’ Firestoreã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ«ãƒ¼ãƒ«ç¢ºèª
3. **React ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç«¶åˆ** â†’ `--legacy-peer-deps` ãƒ•ãƒ©ã‚°ä½¿ç”¨
4. **ãƒ‡ãƒ¼ã‚¿ãŒè¡¨ç¤ºã•ã‚Œãªã„** â†’ ã‚¤ãƒ³ãƒãƒ¼ãƒˆçŠ¶æ³ã¨console.logã§ç¢ºèª

### ãƒ‡ãƒãƒƒã‚°æ–¹æ³•
- ãƒ–ãƒ©ã‚¦ã‚¶é–‹ç™ºè€…ãƒ„ãƒ¼ãƒ«ã®Consoleã‚¿ãƒ–ã§Firestoreæ¥ç¶šãƒ­ã‚°ç¢ºèª
- Firebase Console ã§Firestoreãƒ‡ãƒ¼ã‚¿ç›´æ¥ç¢ºèª
- `components/firestore-test.tsx` ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§æ¥ç¶šãƒ†ã‚¹ãƒˆ

## ğŸ“– é–¢é€£ãƒªãƒ³ã‚¯

- [Firebase Console](https://console.firebase.google.com/)
- [Firebase Documentation](https://firebase.google.com/docs)
- [Next.js Documentation](https://nextjs.org/docs)
- [Firestore Security Rules](https://firebase.google.com/docs/firestore/security/get-started)

---

**æ³¨æ„**: æ©Ÿå¯†æƒ…å ±ã‚’å«ã‚€ãƒ•ã‚¡ã‚¤ãƒ«ã¯é©åˆ‡ã«ç®¡ç†ã—ã€å…¬é–‹ãƒªãƒã‚¸ãƒˆãƒªã«ã‚³ãƒŸãƒƒãƒˆã—ãªã„ã‚ˆã†æ³¨æ„ã—ã¦ãã ã•ã„ã€‚